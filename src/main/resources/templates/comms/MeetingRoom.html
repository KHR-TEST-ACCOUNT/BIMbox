<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="fragments/head :: head_fragment(title = 'コミュニティー', links = ~{::link}, scripts = ~{::script})">
	<!-- 
	<link rel="stylesheet" th:href="@{/css/post.css}">
	 -->
	<link rel="stylesheet" th:href="@{/css/meetingRoom.css}">
	<script type="text/javascript" th:src="@{/js/meetingRoom.js}"></script>
</head>
<body>
	<!-- サイドバー -->
	<div class="page-wrapper chiller-theme toggled">
		<div th:replace="fragments/Sidenav :: sidenav"></div>
		<main class="page-content animsition">
			<!-- Content -->
			<div class="column two">
			
			
				<!-- 投稿検索 -->
				<form th:action="@{/manage/users/UserSearch.do}" method="post" class="search-container container-fluid">
					<div class="p-1 searchBlock">
						<!-- 検索条件 -->
						<div class="d-flex align-items-between">
							<h6 class="search-criteria">検索条件</h6>
							<h6 id="condition-toggler" class="text-primary" 
								data-bs-toggle="collapse" data-bs-target="#searchCondition"> 
								<span class="d-none">[隠す]</span>
								<span>[表示]</span>
							</h6>
						</div>
						<div id="searchCondition" class="collapse">
							<div class="border p-3 rounded">
								<div class="row">
									<div class="d-flex align-items-top mb-2 col-md-5 col-lg-4">
										<strong style="width: 7rem;">トピック</strong> <input type="text"
											class="form-control form-control-sm" style="width: 11rem;"
											th:field="*{topicSearchForm.subjectContent}" />
										<div
											th:if="${#fields.hasErrors('topicSearchForm.subjectContent')}">
											<span class="text-danger"
												th:errors="*{topicSearchForm.subjectContent}"></span>
										</div>
									</div>
									<div class="d-flex align-items-top mb-2 col-md-5 col-lg-4">
										<strong style="width: 7rem;">投稿内容</strong> <input type="text"
											class="form-control form-control-sm" style="width: 11rem;"
											th:field="*{topicSearchForm.postContent}" />
									</div>
									<div class="d-flex align-items-top mb-2 col-md-11 col-lg-4">
										<strong style="width: 7rem;">投稿ユーザー</strong> <input
											type="text" class="form-control form-control-sm"
											style="width: 11rem;"
											th:field="*{topicSearchForm.createByUser}" />
									</div>
								</div>
							</div>
							<div class="py-2">
								<button class="btn btn-success btn-sm shadow-sm px-3">
									<span>検索実行</span>
								</button>
							</div>
						</div>
					</div>
				</form>


				<!-- トピック新規登録 -->
				<article class="moodle-container">
					<!-- Formの表示非表示 -->
					<div class="d-flex justify-content-end p-1">
						<h6 id="condition-toggler" class="text-primary px-3" 
							data-bs-toggle="collapse" data-bs-target="#topicCreation"> 
							<span class="d-none">[表示]</span>
							<span>[隠す]</span>
						</h6>
					</div>
					<!-- 新規投稿内容 -->
					<div id="topicCreation" class="collapse mt-3" th:object="${topicCreationForm}"
						 th:classappend="${topicCreationForm.isError ? '' : ''}">
						<form th:action="@{/comms/CreateTopic.do}" method="POST" class="border px-3 bg-light form-content" autocomplete="off">
							<!-- topic content  collapse -->
							<div class="share-container">
								<input type="text" th:field="*{subject}" placeholder="Enter a title for the topic." />
								<div th:if="${#fields.hasErrors('subject')}">
									<span class="text-danger" th:errors="*{subject}"></span>
								</div>
							</div>
							<!-- post content -->
							<div class="share-container">
								<input type="text" th:field="*{primaryPost}" placeholder="Share an article, photo, video, or idea" />
								<div th:if="${#fields.hasErrors('primaryPost')}">
									<span class="text-danger" th:errors="*{primaryPost}"></span>
								</div>
							</div>
							<!-- buttons -->
							<div class="action-container">
								<!-- img できてない。-->
								<label for="photo-file" class="media-button">Image</label> 
								<input type="file" id="photo-file" class="d-none" accept="image/*" />
								<div class="p-1 d-inline-block" id="dragandrophandler">
									<img alt="" class="profile-photo thumbnail" id="thumbnail" />
								</div>
								
								<button class="post-button shadow">Post</button>
							</div>
						</form>
					</div>
				</article>
				<!-- トピック情報 -->
				<div th:each="topic : ${topics}">
					<article class="post-container">
						<div th:id="${topic.topicNo}" class="m-3">
							<div th:replace="fragments/Topic :: topic(${topic})"></div>
						</div>	
					</article>
				</div>
			</div>
			<!-- Message Content -->
			<div th:replace="fragments/Toast :: toast"></div>
		</main>
		<!-- page-content" -->
	</div>
	<!-- page-wrapper -->
</body>
</html>