<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="fragments/head :: head_fragment(title = 'コミュニティー', links = ~{::link}, scripts = ~{::script})">
	<!-- 
	<link rel="stylesheet" th:href="@{/css/post.css}">
	 -->
	<link rel="stylesheet" th:href="@{/css/meetingRoom.css}">
	<script type="text/javascript" th:src="@{/js/meetingRoom.js}"></script>
</head>
<body>
	<!-- サイドバー -->
	<div class="page-wrapper chiller-theme toggled">
		<div th:replace="fragments/Sidenav :: sidenav"></div>
		<main class="page-content animsition">
			<!-- Content -->
			<div class="column two">
			
			
				<!-- 投稿検索 -->
				<form th:action="@{/manage/users/UserSearch.do}" method="post" class="search-container container-fluid">
					<div class="p-1 searchBlock">
						<!-- 検索条件 -->
						<div class="d-flex align-items-between ac-parent">
							<h6 class="search-criteria">検索条件</h6>
							<h6 class="link" >
							<!-- 
								data-bs-toggle="collapse" data-bs-target="#topicCreation"> 
								<span>[表示]</span>
								<span class="d-none">[隠す]</span>
							 -->
								<i class="fa fa-chevron-down"></i>
							</h6>
						</div>
						<div id="searchCondition" class="collapse ac-child">
							<div class="row py-3">
								<div class="inputArea d-flex align-items-top">
									<strong>トピック</strong> <input type="text"
										
										th:field="*{topicSearchForm.subjectContent}" />
									<div
										th:if="${#fields.hasErrors('topicSearchForm.subjectContent')}">
										<span class="text-danger"
											th:errors="*{topicSearchForm.subjectContent}"></span>
									</div>
								</div>
								<div class="inputArea d-flex align-items-top">
									<strong>投稿ユーザー</strong> <input
										type="text" 
										th:field="*{topicSearchForm.createByUser}" />
								</div>
								<div class="inputArea d-flex align-items-top">
									<strong>投稿内容</strong> <input type="text"
										
										th:field="*{topicSearchForm.postContent}" />
								</div>
							</div>
							<div class="py-2">
								<button class="btn btn-success btn-sm shadow-sm px-3">
									<span>検索実行</span>
								</button>
							</div>
						</div>
					</div>
				</form>

				<!-- トピック情報 -->
				<div class="topics">
					<div th:each="topic : ${topics}">
						<article class="post-container">
							<div th:id="${topic.topicNo}" class="m-3">
								<div th:replace="fragments/Topic :: topic(${topic})"></div>
							</div>	
						</article>
					</div>
				</div>
				
				<!-- トピック新規登録 -->
				<article class="moodle-container">
					<!-- Formの表示非表示 -->
					<div class="d-flex justify-content-end p-1 ac-parent">
						<h6 id="condition-toggler" class="px-3 link" >
							<i class="fa fa-chevron-down"></i>
						</h6>
					</div>
					<!-- 新規投稿内容 -->
					<div id="topicCreation" class="collapse mt-3 ac-child" th:object="${topicCreationForm}"
						 th:classappend="${topicCreationForm.isError ? '' : ''}">
						<form th:action="@{/comms/CreateTopic.do}" method="POST" class="border px-3 form-content" autocomplete="off">
							<!-- topic content  collapse -->
							<div class="share-container">
								<textarea th:field="*{subject}" rows="1" placeholder="Enter a title for the topic."></textarea>
								<div th:if="${#fields.hasErrors('subject')}">
									<span class="text-danger" th:errors="*{subject}"></span>
								</div>
							</div>
							<!-- post content -->
							<div class="share-container">
								<textarea th:field="*{primaryPost}" rows="1" placeholder="Share an article, photo, video, or idea"></textarea>
								<div th:if="${#fields.hasErrors('primaryPost')}">
									<span class="text-danger" th:errors="*{primaryPost}"></span>
								</div>
							</div>
							<!-- buttons -->
							<div class="action-container">
							
							
								<!-- img できてない。-->
								<!-- 
								<label for="photo-file" class="media-button">Image</label> 
								<input type="file" id="photo-file" class="d-none" accept="image/*" />
								<div class="p-1 d-inline-block" id="dragandrophandler">
									<img alt="" class="profile-photo thumbnail" id="thumbnail" />
								</div>
								 -->
								
					<div class="file-upload">
						<div class="image-upload-wrap">
							<input class="file-upload-input" type='file'
								onchange="readURL(this);" accept="image/*" />
							<div class="drag-text">
								<h3>Drag and drop a file or select add Image</h3>
							</div>
						</div>
						<div class="file-upload-content">
							<img class="file-upload-image" src="#" alt="your image" />
							<div class="image-title-wrap">
								<button type="button" onclick="removeUpload()" class="remove-image">
									Remove <span class="image-title">Uploaded Image</span>
								</button>
							</div>
						</div>
					</div>
								
								
								<button class="post-button shadow">Post</button>
							</div>
						</form>
					</div>
				</article>
				
			</div>
			<!-- Message Content -->
			<div th:replace="fragments/Toast :: toast"></div>
		</main>
		<!-- page-content" -->
	</div>
	<!-- page-wrapper -->
</body>
</html>