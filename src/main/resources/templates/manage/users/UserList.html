<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="fragments/head :: head_fragment(title = 'User List', links = ~{::link}, scripts = ~{::script})">
	<link rel="stylesheet" th:href="@{/css/usersList.css}">
	<link rel="stylesheet" th:href="@{https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css}">
	<link rel="stylesheet" th:href="@{https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css}">
	<script type="text/javascript" th:src="@{/js/meetingRoom.js}"></script>
</head>
<body>
	<!-- サイドバー -->
	<div class="page-wrapper chiller-theme toggled">
		<div th:replace="fragments/Sidenav :: sidenav"></div>
		<main class="page-content ">
		

			<!-- Content -->
			<nav class="page-header navbar navbar-light bg-dark search-container">
				<div class="center d-flex justify-content-center">
					<a  th:href="@{/manage/users/UserList.html}" class="navbar-brand btn" style="color: white;">User List</a> 
					<form class="foge" th:action="@{/manage/users/UserSearch.do}" th:object="${userSearchForm}">
							<!-- ユーザー登録・検索 -->
						<div class="input-group">
							<input type="text" class="form-control" th:field="*{name}" placeholder="ユーザー名">
							<div class="input-group-append">
								<button type="submit" class="btn btn-secondary" >
									<i class="fa fa-search"></i>
								</button>
							</div>
						</div>
					</form>
				</div>
					<!-- 
					<a href="#" id="condition-toggler" 
					   data-bs-toggle="collapse" data-bs-target="#searchCondition">
						<span class="d-none">[隠す]</span>
						<span>[表示]</span>
					</a>
					 -->
				
				
				<!-- ユーザー登録・検索 -->
				<form th:action="@{/manage/users/UserSearch.do}" th:object="${userSearchForm}">
					<div id="searchCondition" class="collapse p-3 searchBlock">
						<!-- ユーザー登録・検索 -->
						<div class="border p-3 rounded">
							<div class="row">

								<!-- Actual search box -->
								<div class="d-flex align-items-top input-group col-12">
									<input type="text" class="form-control" th:field="*{name}" placeholder="ユーザー名">
									<div class="input-group-append">
										<button class="btn btn-secondary" type="button">
											<i class="fa fa-search"></i>
										</button>
									</div>
								</div>
							</div>
						</div>
						<button
							class="btn btn-outline-success btn-sm shadow-sm px-3 py-2 my-2">
							<span>Search</span>
						</button>
					</div>
				</form>
			</nav>
								<!-- 
								<div class="d-flex align-items-top input-group col-12">
									<input type="text" class="form-control" th:field="*{empNo}" placeholder="趣味">
									<div class="input-group-append">
										<button class="btn btn-secondary" type="button">
											<i class="fa fa-search"></i>
										</button>
									</div>
								</div>
								 -->

								<!-- 
										<div class="d-flex align-items-top mb-2 col-md-5 col-lg-4">
											<strong style="width: 7rem;">ユーザー番号</strong> <input
												type="text" class="form-control form-control-sm"
												style="width: 11rem;" th:field="*{empNo}"
												placeholder="Search by name..." />
										</div>
										<div class="d-flex align-items-top mb-2  col-md-5 col-lg-4">
											<strong style="width: 7rem;">ユーザー名</strong>
											<input type="text" class="form-control form-control-sm" style="width: 11rem;"
												   th:field="*{name}" placeholder="Search by name..." />
										</div>
										<div class="d-flex align-items-top mb-2 col-md-11 col-lg-4">
											<strong style="width: 7rem;">趣味</strong> 
												<select class="form-select form-select-sm" style="width: 11rem;" th:field="*{hobbys}">
												<option value="">-- 選択してください</option>
												<option value="プログラミング">プログラミング</option>
												<option value="アウトドア">アウトドア</option>
												<option value="ファッション">ファッション</option>
												<option value="筋トレ">筋トレ</option>
												<option value="映画">映画</option>
												<option value="漫画・アニメ">漫画・アニメ</option>
												<option value="ペット">ペット</option>
											</select>
										</div>
											 -->

								<!-- 
												<select name="" th:field="*{hobbys}">
													<option value="">-- 選択してください</option>
													<option value="プログラミング">プログラミング</option>
													<option value="アウトドア">アウトドア</option>
													<option value="ファッション">ファッション</option>
													<option value="筋トレ">筋トレ</option>
													<option value="映画">映画</option>
													<option value="漫画・アニメ">漫画・アニメ</option>
													<option value="ペット">ペット</option>
												</select> 
												
												 -->
						<!-- 
								<div class="text-end newRegist">
									<a  th:if="${#authentication.principal.roles.get(0).code == '01'}"
										id="disabled_do" class="btn btn-outline-primary btn-sm shadow-sm">
										<span>ユーザー新規登録</span>
									</a>
									<a  th:unless="${#authentication.principal.roles.get(0).code == '01'}"
										th:href="@{/manage/users/UserRegistration.html}" class="btn btn-outline-primary btn-sm shadow-sm py-2">
										<span>ユーザー新規登録</span>
									</a>
								</div>
								 -->
			
			
			
			<!-- data-panel -->
			<div class="container topics">
				<th:block th:if="${searchResult}">
					<div class="row">
						<div class="col-sm-6 col-md-4 col-lg-3"  th:each="user : ${searchResult.entities}">
							<div class="card-content card-rounded-7 mb-3 p-1">
								<div class="zooming">
									<img class="card-image" id="show-user-modal"
										th:src="${ user.profileImage.encodedString}"
										alt="Card image cap" data-id="601" data-toggle="modal"
										th:data-target="'#show-user-modal' + ${user.id}" >
								</div>
								<div class="card-body">
									<input type="hidden" name="userId" id="userId" th:text="${ user.id }">
									<h5 class="card-text username" th:text="${user.username}">
										<i class="fa fa-male"></i> user name
									</h5>
									<p class="card-text">
										<i class="fas fa-podcast" style="color: gray"></i>
										<th:block th:switch="${user.roles.get(0).code}">
											<span th:case=01 th:text="User" class="user-role">user-role</span>
											<span th:case=02 th:text="Manager" class="user-role">user-role</span>
											<span th:case=03 th:text="Administer" class="user-role">user-role</span>
											<span th:case=* th:text="Unknown" class="user-role">user-role</span>
										</th:block>
									</p>
								</div>
							</div>
							
							<!-- Modal インタラクティブウィンドウからの飛び出し-->
							<div class="modal fade"th:id="'show-user-modal' + ${user.id}"
								 tabindex="-1" role="dialog" aria-hidden="true">
								<div class="modal-dialog modal-lg" role="document">
								
									<div class="modal-content">
										<div class="modal-header">
											<input type="hidden" id="userId" th:text="${ user.id }">
											<h3 class="modal-title" id="show-user-name" th:text="${user.username}"></h3>
											<button type="button" class="close" data-dismiss="modal"
												aria-label="Close">
												<span aria-hidden="true">×</span>
											</button>
										</div>
										<div class="modal-body" id="show-user-body">
											<div class="row">
												<div class="col-sm-4" id="show-user-image">
													<img th:src="${ user.profileImage.encodedString}"
														class="img-fluid" alt="Responsive image">
												</div>
												<div class="col-sm-8" id="show-user-details">
													<p id="show-user-age">Age: 25</p>
													<p id="show-user-region">access level: 
														<th:block th:switch="${user.roles.get(0).code}">
															<span th:case=01 th:text="User" class="user-role">user-role</span>
															<span th:case=02 th:text="Manager" class="user-role">user-role</span>
															<span th:case=03 th:text="Administer" class="user-role">user-role</span>
															<span th:case=* th:text="Unknown" class="user-role">user-role</span>
														</th:block>
													</p>
													
													<p id="show-user-birthday">
														<i class="fa fa-birthday-cake"></i> 1995-05-05
													</p>
													<p id="show-user-email">
														<i class="fa fa-envelope"></i>
														<span th:text="${user.email}"></span>
													</p>
				
												</div>
											</div>
										</div>
										<div class="modal-footer row mx-3">
											<div class="col-12" id="user-update">
												<p id="show-user-update">
													<small class="text-muted">Created at:
														2020-04-01T09:37:57.270Z<br>Updated at:
														2020-04-01T09:37:57.270Z
													</small>
												</p>
											</div>
											<button type="button" class="btn btn-secondary"
												data-dismiss="modal">Close</button>
										</div>
									</div>
				
								</div>
							</div>
							
							
						</div>
					</div>
					
					
				</th:block>
				
			</div>


			<!-- Pagenation -->
			<div th:replace="fragments/Pagination :: pagination(@{/manage/users/UserPageView.do})"></div>
			<!-- Message -->
			<div th:replace="fragments/Toast :: toast"></div>
		</main>
	</div>
	<script type="text/javascript" th:src="@{https://unpkg.com/axios/dist/axios.min.js}"></script>
	<script type="text/javascript" th:src="@{https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js}"></script>
	<script type="text/javascript" th:src="@{https://code.jquery.com/jquery-3.3.1.slim.min.js}"></script>
	<script type="text/javascript" th:src="@{https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js}"></script>
	<script type="text/javascript" th:src="@{https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js}"></script>
	<script type="text/javascript" th:src="@{https://cdnjs.cloudflare.com/ajax/libs/axios/0.24.0/axios.min.js}"></script>
	<script type="text/javascript" th:src="@{https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js}"></script>
	<script type="text/javascript" th:src="@{/js/userList.js}"></script>
</body>
</html>